var button=document.querySelector(".form-review__button"),popupSuccess=document.querySelector(".popup-success"),closeSuccess=popupSuccess.querySelector(".popup-success__button"),popupError=document.querySelector(".popup-error"),closeError=popupError.querySelector(".popup-error__button"),form=document.querySelector(".form-review__content"),userName=form.querySelector("[name=user-name]"),userEmail=form.querySelector("[name=user-email]"),userMessage=form.querySelector("[name=user-message]"),isStorageSupport=!0,currentName="",currentEmail="";try{currentName=localStorage.getItem("userName"),currentEmail=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}function cursorFocus(){userName.value?userEmail.value?userMessage.value||userMessage.focus():userEmail.focus():userName.focus()}popupSuccess.classList.add("popup-success--hide"),popupError.classList.add("popup-error--hide"),button.addEventListener("click",function(e){e.preventDefault(),userName.value&&userEmail.value&&userMessage.value?isStorageSupport&&(localStorage.setItem("user-name",userName.value),localStorage.setItem("user-email",userEmail.value),popupSuccess.classList.add("popup-success--show")):(e.preventDefault(),popupError.classList.remove("popup-error--show"),popupError.offsetWidth=popupError.offsetWidth,popupError.classList.add("popup-error--show"))}),closeSuccess.addEventListener("click",function(e){e.preventDefault(),popupSuccess.classList.remove("popup-success--show")}),closeError.addEventListener("click",function(e){e.preventDefault(),popupError.classList.remove("popup-error--show"),popupError.classList.add("popup-error"),cursorFocus()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupError.classList.contains("popup-error--show")?(popupError.classList.remove("popup-error--show"),cursorFocus()):popupSuccess.classList.contains("popup-success--show")&&popupSuccess.classList.remove("popup-success--show"))});